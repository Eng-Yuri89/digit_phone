{% extends 'admin/adminbase.html' %}


{% load static %}
{% load i18n %}
{% block body %}

    <div class="page-body">
        <!-- Container-fluid starts-->
        <div class="container-fluid">
            <div class="page-header">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="page-header-left">
                            <h3>{% translate 'Add Products' %}
                                <small>
                                    {% if not edit %}üÜï Add a new product {% else %} ‚úè Edit a
                                        product{% endif %}</small>
                            </h3>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <ol class="breadcrumb pull-right">
                            <li class="breadcrumb-item"><a href="{% url 'core:AdminIndex' %}"><i
                                    data-feather="home"></i></a></li>
                            <li class="breadcrumb-item">{% translate 'Physical' %}</li>
                            <li class="breadcrumb-item active">{% translate 'Add Product' %}</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        <!-- Container-fluid Ends-->

        <!-- Container-fluid starts-->
        <div class="container-fluid">
            <div class="row product-adding">
                <div class="col-xl-12">
                    <form class="needs-validation repeater" enctype="multipart/form-data"
                          action="{% url 'vendors:ProductCreate' %}"
                          name="ProductForm" id="ProductForm" data-price-url="{% url 'vendors:AjaxFinalPrice' %}"
                          method="post">
                        {% csrf_token %}
                        <div class="card">


                            <div class=" alert-info" id="errorHeader"></div>
                            <div>
                                {% if product_form.errors %}

                                    {% for error_field, error_message in product_form.errors.items %}

                                        <div class="alert alert-danger">
                                            {{ error_field|striptags }}: {{ error_message|striptags }}
                                            <strong>{{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}

                                {% endif %}
                                {% if media_form.errors %}
                                    {% for error_field, error_message in media_form.errors.items %}

                                        <div class="alert alert-danger">
                                            {{ error_field|striptags }}: {{ error_message|striptags }}
                                            <strong>{{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}

                                {% endif %}
                                {% if attribute_form.errors %}
                                    {% for error_field, error_message in attribute_form.errors.items %}

                                        <div class="alert alert-danger">
                                            {{ error_field|striptags }}: {{ error_message|striptags }}
                                            <strong>{{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}

                                {% endif %}
                                {% if option_form.errors %}
                                    {% for error_field, error_message in option_form.errors.items %}

                                        <div class="alert alert-danger">
                                            {{ error_field|striptags }}: {{ error_message|striptags }}
                                            <strong>{{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}

                                {% endif %}
                                {% if variant_form.errors %}
                                    {% for error_field, error_message in variant_form.errors.items %}

                                        <div class="alert alert-danger">
                                            {{ error_field|striptags }}: {{ error_message|striptags }}
                                            <strong>{{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}

                                {% endif %}


                            </div>


                            <div class="card-body">


                                <ul class="nav nav-tabs tab-coupon" id="myTab" role="tablist">
                                    <li class="nav-item"><a class="nav-link active show" id="general-tab"
                                                            data-toggle="tab"
                                                            href="#general" role="tab" aria-controls="general"
                                                            aria-selected="true" data-original-title=""
                                                            title="">{% translate 'General' %}</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" id="data-tabs" data-toggle="tab"
                                                            href="#description"
                                                            role="tab" aria-controls="description" aria-selected="false"
                                                            data-original-title=""
                                                            title="">{% translate 'Description' %}</a></li>
                                    <li class="nav-item"><a class="nav-link" id="variant-tabs" data-toggle="tab"
                                                            href="#variant"
                                                            role="tab" aria-controls="data" aria-selected="false"
                                                            data-original-title=""
                                                            title="">{% translate 'Variant' %}</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" id="description-tabs" data-toggle="tab"
                                                            href="#data"
                                                            role="tab" aria-controls="data" aria-selected="false"
                                                            data-original-title="" title="">{% translate 'Data' %}</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" id="image-tabs" data-toggle="tab"
                                                            href="#image"
                                                            role="tab" aria-controls="image" aria-selected="false"
                                                            data-original-title="" title="">{% translate 'Image' %}</a>
                                    </li>


                                    <li class="nav-item"><a class="nav-link" id="seo-tabs" data-toggle="tab" href="#seo"
                                                            role="tab" aria-controls="seo" aria-selected="false"
                                                            data-original-title="" title="">{% translate 'SEO' %}</a>
                                    </li>
                                </ul>
                                <div class="tab-content" id="myTabContent">
                                    <div class="tab-pane fade active show" id="general" role="tabpanel"
                                         aria-labelledby="general-tab">
                                        <!-- Container-fluid starts-->
                                        <div class="container-fluid">
                                            <div class=" product-adding">
                                                <div class="card ">

                                                    <div class="card-header">
                                                        <h5>{% translate 'General' %}</h5>
                                                    </div>
                                                    <div class="card-body  ">
                                                        <div class="digital-add needs-validation ">
                                                            <div class="form-group mb-3 row">
                                                                <label for="validationCustom01"
                                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Product Name' %}
                                                                    :</label>
                                                                <div class="col-xl-8 col-sm-7">
                                                                    <input class="form-control" id="validationCustom01"
                                                                           type="text" required=""
                                                                           name="title" value="{{ product.title }}"
                                                                           oninvalid="invalidFunction(event,'title not empty')">
                                                                </div>
                                                                <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                            </div>

                                                            <div class="form-group row">
                                                                <label class="col-xl-3 col-sm-4">Add Description
                                                                    :</label>
                                                                <div class="col-xl-8 col-sm-7 description-sm">
                                                                <textarea id="editor1" name="long_desc" cols="10"
                                                                          rows="4"></textarea>
                                                                </div>
                                                            </div>


                                                            <div class="form-group row">
                                                                <label class="col-xl-3 col-sm-4">Add Keyword :</label>
                                                                <div class="col-xl-8 col-sm-7 description-sm">
                                                                <textarea id="editor1" name="keyword" cols="10"
                                                                          rows="2"></textarea>
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Container-fluid Ends-->
                                    </div>
                                    <div class="tab-pane fade" id="description" role="tabpanel"
                                         aria-labelledby="description-tabs">
                                        <h4>description</h4>
                                        <div class="card-body">
                                            <div class="row product-adding">
                                                <div class="col-xl-5">
                                                    <div class="add-product">
                                                        <div class="row">
                                                            <input class="form-control col-md-6"
                                                                   id="title" type="hidden"
                                                                   name="seller" value="{{ request.user.id }}"
                                                                   required="">

                                                            <div class="form-group mb-3 row">
                                                                <label for="validationCustom01"
                                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Model' %}
                                                                    :</label>
                                                                <div class="col-xl-8 col-sm-7">
                                                                    <input class="form-control" id="validationCustom01"
                                                                           type="text"
                                                                           required=""
                                                                           name="model">
                                                                </div>
                                                                <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                            </div>
                                                            <div class="form-group mb-3 row">
                                                                <label for="validationCustom01"
                                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Brand' %}
                                                                    :</label>
                                                                <div class="col-xl-8 col-sm-7">
                                                                    <input class="form-control" id="validationCustom01"
                                                                           type="text"
                                                                           required=""
                                                                           name="brand">
                                                                </div>
                                                                <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                            </div>
                                                            <table class="table table-responsive">
                                                                <thead>
                                                                <tr>
                                                                    <th style="width: 15%">
                                                                        {% translate 'Purchase Price' %}
                                                                    </th>
                                                                    <th style="width: 15%">
                                                                        {% translate ' Sale Price' %}
                                                                    </th>
                                                                    <th style="width: 15%">
                                                                        {% translate ' Discount Price' %}
                                                                    </th>
                                                                    <th style="width: 15%">
                                                                        {% translate 'Discount Active' %}
                                                                    </th>
                                                                    <th style="width: 20%">
                                                                        {% translate 'Final Price' %}
                                                                    </th>
                                                                    <th style="width: 20%">
                                                                        {% translate ' sell/Commission' %}
                                                                    </th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>

                                                                <tr>
                                                                    <td>
                                                                        <div>
                                                                            <input class="form-control"
                                                                                   id="purchase_price"
                                                                                   type="number"
                                                                                   required=""
                                                                                   name="purchase_price">
                                                                        </div>
                                                                        <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                                    </td>
                                                                    <td>
                                                                        <div>
                                                                            <input class="form-control" id="sale_price"
                                                                                   type="number"
                                                                                   required=""
                                                                                   name="sale_price">
                                                                        </div>
                                                                        <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                                    </td>
                                                                    <td>
                                                                        <div>
                                                                            <input class="form-control"
                                                                                   id="discount_price"
                                                                                   type="number"
                                                                                   name="discount_price">
                                                                        </div>
                                                                        <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                                    </td>
                                                                    <td>
                                                                        <div class="form-group">

                                                                            <div class="m-checkbox-inline mb-0 custom-radio-ml d-flex radio-animated">
                                                                                <label class="d-block" for="edo-ani">
                                                                                    <select class="custom-select"
                                                                                            id="discount_active"
                                                                                            name="discount_active">
                                                                                        {% for value, text in product_form.discount_active.field.choices %}
                                                                                            <option value="{{ value }}">{{ text }}</option>
                                                                                        {% endfor %}
                                                                                    </select>
                                                                                </label></div>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div>
                                                                            <div id="appendHere">

                                                                                <input class="form-control"
                                                                                       id="final_price"
                                                                                       required=""
                                                                                       type="number"
                                                                                       value="{{ final_price }}"
                                                                                       name="final_price"
                                                                                >

                                                                            </div>
                                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}
                                                                            </div>
                                                                            <input class="form-control"
                                                                                   id="commission_price"
                                                                                   type="number"
                                                                                   disabled

                                                                                   value="{{ commission }}"
                                                                                   name="commission">
                                                                        </div>
                                                                    </td>

                                                                    <td>
                                                                        <div>
                                                                            <p class="text-uppercase">{% translate 'price for user' %}</p>

                                                                        </div>
                                                                        <br>
                                                                        <p class="text-uppercase">{% translate 'commission' %}</p>

                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-sm-4 mb-0">{% translate 'Quantity' %}
                                                                :</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="number"
                                                                       required=""
                                                                       name="quantity">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-sm-4 mb-0">{% translate 'Minimum Quantity' %}
                                                                :</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="number"
                                                                       required=""
                                                                       name="minimum_quantity">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>


                                                        <div class="form-group row">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Subtract Stock' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits"
                                                                        id="exampleFormControlSelect1"
                                                                        name="subtract_stock">
                                                                    {% for value, text in product_form.subtract_stock.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Out Of Stock Status' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits"
                                                                        id="exampleFormControlSelect1"
                                                                        name="out_of_stock_status">
                                                                    {% for value, text in product_form.out_of_stock_status.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Requires Shipping' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits"
                                                                        id="exampleFormControlSelect1"
                                                                        name="requires_shipping">
                                                                    {% for value, text in product_form.requires_shipping.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>


                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-sm-4 mb-0">{% translate 'Weight' %}
                                                                :</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="number"
                                                                       required=""
                                                                       name="weight">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-sm-4 mb-0">{% translate ' Length' %}
                                                                :</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="number"
                                                                       required=""
                                                                       name="length">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>


                                                        <div class="form-group row">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'status' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits"
                                                                        id="exampleFormControlSelect1"
                                                                        name="status">
                                                                    {% for value, text in product_form.status.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Is Featured' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits"
                                                                        id="exampleFormControlSelect1"
                                                                        name="is_featured">
                                                                    {% for value, text in product_form.is_featured.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-sm-4 mb-0">{% translate 'Sort Orders' %}
                                                                :</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="number"
                                                                       required=""
                                                                       name="sort_order">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade " id="variant" role="tabpanel"
                                         aria-labelledby="variant-tabs">
                                        <div class="card-header"><h4>Variant</h4></div>
                                        <div class="card-body">
                                            <div class="form-group row">
                                                <label for="exampleFormControlSelect1"
                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Variant System' %}:</label>
                                                <div class="col-xl-8 col-sm-7">
                                                    <select class="form-control digits" id="exampleFormControlSelect1"
                                                            name="variant">
                                                        {% for value, text in product_form.variant.field.choices %}
                                                            <option value="{{ value }}">{{ text }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>


                                            <table class="table table-responsive-md">
                                                <tr>
                                                    <th style="align-content: center">{% translate ' Title ' %}</th>
                                                    <th style="align-content: center">{% translate ' Size ' %}</th>
                                                    <th style="align-content: center">{% translate ' Color ' %}</th>
                                                    <th style="align-content: center">{% translate ' Price ' %}</th>
                                                    <th style="align-content: center">{% translate ' Quantity ' %}</th>
                                                    <th style="align-content: center">{% translate ' Image ' %}</th>

                                                </tr>
                                            </table>
                                            <div>
                                                <div class="variant_div">
                                                    <div class="variant_div_row first_variant">
                                                        <div data-repeater-item class="table table-responsive">
                                                            <table class="table ">
                                                                <td style="width:5%"><input type="text"

                                                                                            name="variant_title"

                                                                                            placeholder="Product Title"/>
                                                                </td>
                                                                <td style="width:20%"><select class=""
                                                                                              id="product_variant"
                                                                                              name="variant_color">

                                                                    {% for value, title in  variant_form.color.field.choices %}
                                                                        <option value="{{ value }}">{{ title }}</option>
                                                                    {% endfor %}
                                                                </select></td>

                                                                <td style="width:20%"><select class=""
                                                                                              id="product_variant"
                                                                                              name="variant_size">

                                                                    {% for value, title in  variant_form.size.field.choices %}
                                                                        <option value="{{ value }}">{{ title }}</option>
                                                                    {% endfor %}
                                                                </select></td>


                                                                <td style="width:5%"><input type="text"

                                                                                            name="variant_price"

                                                                                            placeholder="option amount"/>
                                                                </td>
                                                                <td style="width:10%">
                                                                    <input type="text"

                                                                           name="variant_quantity"

                                                                           placeholder="option amount"/>
                                                                </td>


                                                                <td style="width:20%">
                                                                    <div>
                                                                        <input type="file" name="ImageVariant"
                                                                               id="variant_image"
                                                                               onchange="document.getElementById('blah').src = window.URL.createObjectURL(this.files[0])">

                                                                        <img src="{{ user.image.url }}" alt=""
                                                                             width="20%"
                                                                             height="20%" id="blah"/>
                                                                    </div>
                                                                </td>


                                                            </table>
                                                        </div>
                                                    </div>

                                                </div>


                                                <div class="form-group mb-0">
                                                    <div class="product-buttons text-center">

                                                        <button class="btn btn-primary fa fa-plus  add_variant"
                                                                type="button">
                                                        </button>
                                                        <button class="btn btn-light fa fa-minus-circle  remove_variant"
                                                                type="button">

                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade " id="data" role="tabpanel" aria-labelledby="data-tabs">
                                        <div class="card-header"> detail</div>
                                        <div class="card-body">
                                            <div class="form-group row">
                                                <label for="exampleFormControlSelect1"
                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Product Filter' %}:</label>
                                                <div class="col-xl-8 col-sm-7">
                                                    <select class="form-control digits" id="exampleFormControlSelect1"
                                                            name="filter">
                                                        {% for value, text in product_form.filter.field.choices %}
                                                            <option value="{{ value }}">{{ text }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="exampleFormControlSelect1"
                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Product Manufacturer' %}:</label>
                                                <div class="col-xl-8 col-sm-7">
                                                    <select class="form-control digits" id="exampleFormControlSelect1"
                                                            name="manufacturer">
                                                        {% for value, text in product_form.manufacturer.field.choices %}
                                                            <option value="{{ value }}">{{ text }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="exampleFormControlSelect1"
                                                       class="col-xl-3 col-sm-4 mb-0">{% translate 'Product Related' %}:</label>
                                                <div class="col-xl-8 col-sm-7">
                                                    <select class="form-control digits" id="exampleFormControlSelect1"
                                                            name="related">
                                                        {% for value, text in product_form.related.field.choices %}
                                                            <option value="{{ value }}">{{ text }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>


                                            <br> <br>
                                            <div>
                                                <div class="form-group row  col-md-12 attributes_div">
                                                    <div class="row col-md-12 attributes_div_row first_attributes">
                                                        <div class=" col-md-6">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="">{% translate 'Product Attributes' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits"
                                                                        id="exampleFormControlSelect1"
                                                                        name="attribute">
                                                                    {% for value, text in attribute_form.attribute.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="validationCustom01"
                                                                   class="">{% translate 'Attributes Detail' %}
                                                                :</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="text"

                                                                       name="attribute_detail">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="form-group mb-0">
                                                    <div class="product-buttons text-center">

                                                        <button class="btn btn-primary fa fa-plus  add_attributes"
                                                                type="button">
                                                        </button>
                                                        <button class="btn btn-light fa fa-minus-circle  remove_attributes"
                                                                type="button">

                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <br> <br>


                                            <div>
                                                <div class="form-group row  col-md-12 option_div">
                                                    <div class="row col-md-12 option_div_row first_option">
                                                        <div class=" col-md-4">
                                                            <label for="exampleFormControlSelect1"
                                                                   class="">{% translate 'Product option' %}:</label>
                                                            <div class="col-xl-8 col-sm-7">
                                                                <select class="form-control digits attributes"
                                                                        id="product_option"
                                                                        name="option">
                                                                    {% for value, text in option_form.option.field.choices %}
                                                                        <option value="{{ value }}">{{ text }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-3">
                                                            <label for="validationCustom01"
                                                                   class="">{% translate 'option Detail' %} :</label>
                                                            <div class="">
                                                                <input class="form-control" id="validationCustom01"
                                                                       type="text"

                                                                       name="option_detail">
                                                            </div>
                                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                                        </div>

                                                        <div class="form-group col-md-4">
                                                            <label class="">{% translate ' option Price ' %} :</label>
                                                            <fieldset class="qty-box col-xl-9 col-xl-8 col-sm-7">
                                                                <div class="input-group">
                                                                    <input class="touchspin" type="text" value="1"
                                                                           name="option_price">
                                                                </div>
                                                            </fieldset>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group mb-0">
                                                    <div class="product-buttons text-center">

                                                        <button class="btn btn-primary fa fa-plus  add_option"
                                                                type="button">
                                                        </button>
                                                        <button class="btn btn-light fa fa-minus-circle  remove_option"
                                                                type="button">

                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="option" role="tabpanel"
                                         aria-labelledby="option-tabs">
                                        <h4>Option</h4>

                                    </div>
                                    <div class="tab-pane fade" id="image" role="tabpanel" aria-labelledby="image-tabs">
                                        {{ formset.management_form }}
                                        <div class="add-product">
                                            <div class="row media_div_row ">
                                                <div class="col-xl-4 xl-50 col-sm-12 col-12">
                                                    <img alt=""
                                                         class="img-fluid image_zoom_1 blur-up lazyloaded img_preview">
                                                </div>
                                                <div class="col-xl-3 xl-50 col-sm-6 col-3">
                                                    <ul class="file-upload-product">
                                                        <li>
                                                            <div class="box-input-file"><input
                                                                    class="upload select_media"
                                                                    type="file"
                                                                    id="Product image"
                                                                    name="image">
                                                                <i class="fa fa-plus "></i></div>
                                                        </li>
                                                        <li>
                                                            <div class="box-input-file"><input
                                                                    class="upload select_media"
                                                                    type="file"
                                                                    name="image">
                                                                <i class="fa fa-plus "><select hidden
                                                                                               name="media_type[]"
                                                                                               class="form-control media_type">
                                                                    <option value="1">Image</option>
                                                                    <option value="2">Video</option>
                                                                </select></i></div>
                                                        </li>
                                                        <li>
                                                            <div class="box-input-file"><input
                                                                    class="upload select_media"
                                                                    type="file"
                                                                    name="image">
                                                                <i class="fa fa-plus "><select hidden
                                                                                               name="media_type[]"
                                                                                               class="form-control media_type">
                                                                    <option value="1">Image</option>
                                                                    <option value="2">Video</option>
                                                                </select></i></div>
                                                        </li>
                                                        <li>
                                                            <div class="box-input-file"><input
                                                                    class="upload select_media"
                                                                    type="file"
                                                                    name="image">
                                                                <i class="fa fa-plus "><select hidden
                                                                                               name="media_type[]"
                                                                                               class="form-control media_type">
                                                                    <option value="1">Image</option>
                                                                    <option value="2">Video</option>
                                                                </select></i></div>
                                                        </li>
                                                        <li>
                                                            <div class="box-input-file"><input
                                                                    class="upload select_media"
                                                                    type="file"
                                                                    name="image">
                                                                <i class="fa fa-plus "><select hidden
                                                                                               name="media_type[]"
                                                                                               class="form-control media_type">
                                                                    <option value="1">Image</option>
                                                                    <option value="2">Video</option>
                                                                </select></i></div>
                                                        </li>
                                                        <li>
                                                            <div class="box-input-file"><input
                                                                    class="upload select_media"
                                                                    type="file"
                                                                    name="image">
                                                                <i class="fa fa-plus "><select hidden
                                                                                               name="media_type[]"
                                                                                               class="form-control media_type">
                                                                    <option value="1">Image</option>
                                                                    <option value="2">Video</option>
                                                                </select></i></div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="tab-pane fade" id="seo" role="tabpanel" aria-labelledby="seo-tabs">

                                        <h4>{% translate 'SEO' %}</h4>
                                        <div class="form-group mb-3 row">
                                            <label for="validationCustom01"
                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Slug' %} :</label>
                                            <div class="col-xl-8 col-sm-7">
                                                <input class="form-control" id="validationCustom01" type="text"
                                                       name="slug">
                                            </div>
                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                        </div>
                                        <div class="form-group mb-3 row">
                                            <label for="validationCustom01"
                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Meta Tag Title' %}
                                                :</label>
                                            <div class="col-xl-8 col-sm-7">
                                                <input class="form-control" id="validationCustom01" type="text"
                                                       required=""
                                                       name="meta_title">
                                            </div>
                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                        </div>
                                        <div class="form-group mb-3 row">
                                            <label for="validationCustom01"
                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Meta Tag Description' %}
                                                :</label>
                                            <div class="col-xl-8 col-sm-7">
                                                <input class="form-control" id="validationCustom01" type="text"
                                                       required=""
                                                       name="meta_description">
                                            </div>
                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                        </div>
                                        <div class="form-group mb-3 row">
                                            <label for="validationCustom01"
                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Meta Tag Keywords' %}
                                                :</label>
                                            <div class="col-xl-8 col-sm-7">
                                                <input class="form-control" id="validationCustom01" type="text"
                                                       required=""
                                                       name="meta_keywords">
                                            </div>
                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                        </div>
                                        <div class="form-group mb-3 row">
                                            <label for="validationCustom01"
                                                   class="col-xl-3 col-sm-4 mb-0">{% translate 'Product Tags' %}
                                                :</label>
                                            <div class="col-xl-8 col-sm-7">
                                                <input class="tag" id="tags" type="text" data-role="tagsinput"
                                                       required=""
                                                       name="tags">
                                            </div>
                                            <div class="valid-feedback">  {% translate ' Looks good  !' %}</div>
                                        </div>


                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class='progress mb-3' style="height:auto">
                                                <div class="progress-bar bg-warning" id="progressbar"
                                                     role="progressbar" data-width="0%" aria-valuenow="0"
                                                     aria-valuemin="0" aria-valuemax="100"
                                                     style="display:none;width: 0%;height: 30px;border-radius: 10px;">
                                                    0%
                                                </div>
                                            </div>
                                        </div>


                                    </div>

                                </div>
                                {% if field.errors %}
                                    <div class="alert alert-danger" style="margin:10px">
                                    {{ field.errors }}
                                {% endif %}
                                </div>

                                <div class="form-group mb-0">
                                    <div class="product-buttons text-center">
                                        <button type="submit" class="btn btn-primary">{% translate 'Add' %}</button>
                                        <button type="button" href="{% url 'core:ProductsList' %} "
                                                class="btn btn-light">{% translate 'Discard' %}</button>
                                    </div>
                                </div>
                            </div>


                    </form>

                    <!-- Container-fluid Ends-->
                </div>
            </div>
        </div>
        <div class="modal" id="modelhhh" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Modal body text goes here.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">Save changes</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% if uploaded_file_url %}
        <p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
    {% endif %}




{% endblock %}



{% block custom_js %}
    <script>
        document.getElementById("title").onchange = function () {
            document.getElementById("slug").value = document.getElementById("title").value.toLowerCase().replaceAll(" ", "-")
                .replace(/[^a-z0-9 -]/g, "") // remove invalid chars
                .replace(/\s+/g, "-") // collapse whitespace and replace by -
                .replace(/-+/g, "-") // collapse dashes
                .replace(/^-+/, "") // trim - from start of text
                .replace(/-+$/, ""); // trim - from end of text
        }

        function invalidFunction(e, message) {
            e.preventDefault();
            document.getElementById('errorHeader').innerText = message;

        }

        $(".add_media").click(function () {
            var media_row = $(".first_media").clone();
            media_row.removeClass("first_media");
            media_row.replaceAll("src", "")
            media_row.find(".select_media").val("");
            media_row.find(".img_preview").attr("src", "").css({"border": "none"}).css({"border-radius": "0px"}).hide();
            media_row.find(".video_preview").attr("src", "").css({"border": "none"}).css({"border-radius": "0px"}).hide();
            $(".media_div").append(media_row);
        });
        $(".remove_media").click(function () {
            if ($(".media_div").find(".media_div_row").length > 1) {
                $(".media_div").children().last().remove();
            }
        });
        $(document).on("change", ".select_media", function () {
            var media_type = $(this).parents(".media_div_row").find(".media_type").val();
            var img_preview = $(this).parents(".media_div_row").find(".img_preview");
            var vid_preview = $(this).parents(".media_div_row").find(".video_preview");
            showPreviewMedia(this, media_type, img_preview, vid_preview);
        });

        function showPreviewMedia(input, media_type, img_preview, video_preview) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    if (media_type == "1") {
                        img_preview.attr("src", e.target.result);
                        img_preview.show();
                        img_preview.css({"border": "5px solid orange"});
                        img_preview.css({"border-radius": "10px"});
                    }
                    if (media_type == "2") {
                        video_preview.show();
                        video_preview.css({"border": "5px solid orange"});
                        video_preview.css({"border-radius": "10px"});
                        video_preview.attr("src", e.target.result);
                        video_preview.load();
                        video_preview.play();

                    }
                }
                reader.readAsDataURL(input.files[0]);
            }
        }


        $(".add_features").click(function () {
            var features_row = $(".first_features").clone();
            features_row.removeClass("first_features").val("");
            features_row.removeClass("product_features");
            features_row.find('#category1').hide();
            features_row.find('#group').change(function (e) {
                var group = $(this).val();
                if (group == 'Premium') {
                    $('#category1').show();
                } else {
                    $('#category1').hide();
                }
            });


            $(".features_div").append(features_row);
        });
        $(".remove_features").click(function () {
            if ($(".features_div").find(".features_div_row").length > 1) {
                $(".features_div").children().last().remove();
            }
        });


        $('input#tags').tagsinput('remove', 'some tag');

    </script>


    <script>
        $("#sale_price,#discount_price,#discount_active,#commission_price").change(function () {
            var url = $("#ProductForm").attr("data-price-url");  // get the url of the `load_cities` view
            var salePrice = $("#sale_price").val()
            var discountPrice = $("#discount_price").val()
            var discountActive = $("#discount_active").val()
            var commissionPrice = $("#commission_price").val()

            $.ajax({                       // initialize an AJAX request
                url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'sale_price': salePrice,
                    'discount_price': discountPrice,
                    'discount_active': discountActive,
                    'commission_price': commissionPrice,

                },

                success: function (data) {
                    $('#appendHere').html(data.rendered_table);

                }
            });

        });
    </script>


{% endblock custom_js %}

{% block foot %} {% include 'admin/footer.html' %}  {% endblock %}
{% block js %}{% include 'admin/js.html' %}{% endblock %}

</div>